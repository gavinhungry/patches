--- ../aur/pacman-color/pacman-color-3.5.4.patch.ORIG	2011-08-21 21:00:04.123582837 -0700
+++ ../aur/pacman-color/pacman-color-3.5.4.patch	2011-08-21 21:01:17.083580581 -0700
@@ -843,7 +843,7 @@
  	va_end(args);
  
  	return(ret);
-@@ -1050,22 +1064,40 @@
+@@ -1050,22 +1064,42 @@
  	ret = vasprintf(&msg, format, args);
  
  	/* print a prefix to the message */
@@ -872,6 +872,7 @@
 +				asprintf(string, "%s%s%s%s", colortab.red, _("error: "), colortab.none, msg);
 +				break;
 +			case PM_LOG_WARNING:
++				if (strstr(format, "ignoring package upgrade")) return 1; /* gavin: no IgnorePkg warnings */
 +				asprintf(string, "%s%s%s%s", colortab.yellow, _("warning: "), colortab.none, msg);
 +				break;
 +			case PM_LOG_FUNCTION:
@@ -889,6 +890,7 @@
 +				asprintf(string, _("error: %s"), msg);
 +				break;
 +			case PM_LOG_WARNING:
++				if (strstr(format, "ignoring package upgrade")) return 1; /* gavin: no IgnorePkg warnings */
 +				asprintf(string, _("warning: %s"), msg);
 +				break;
 +			case PM_LOG_FUNCTION:
@@ -900,7 +902,7 @@
  	}
  	free(msg);
  
-@@ -1100,10 +1132,10 @@
+@@ -1100,10 +1132,11 @@
  	/* print a prefix to the message */
  	switch(level) {
  		case PM_LOG_ERROR:
@@ -909,6 +911,7 @@
  			break;
  		case PM_LOG_WARNING:
 -			fprintf(stream, _("warning: "));
++			if (strstr(format, "ignoring package upgrade")) return 1; /* gavin: no IgnorePkg warnings */
 +			color_fprintf(stream, COLOR_YELLOW_ALL, _("warning: "));
  			break;
  		case PM_LOG_DEBUG:
