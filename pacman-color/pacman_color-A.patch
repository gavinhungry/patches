--- ../aur/pacman-color/pacman-color-4.0.1.patch.ORIG	2012-01-16 20:05:37.494692300 -0800
+++ ../aur/pacman-color/pacman-color-4.0.1.patch	2012-01-16 20:11:45.784680925 -0800
@@ -851,7 +851,7 @@
  	va_end(args);
  
  	return ret;
-@@ -1454,22 +1468,42 @@ int pm_vasprintf(char **string, alpm_log
+@@ -1454,22 +1468,44 @@ int pm_vasprintf(char **string, alpm_log
  	ret = vasprintf(&msg, format, args);
  
  	/* print a prefix to the message */
@@ -877,6 +877,7 @@
 +				pm_asprintf(string, "%s%s%s%s", colortab.red, _("error: "), colortab.none, msg);
 +				break;
 +			case ALPM_LOG_WARNING:
++ 			if (strstr(format, "ignoring package upgrade")) return 1; /* gavin: no IgnorePkg warnings */
 +				pm_asprintf(string, "%s%s%s%s", colortab.yellow, _("warning: "), colortab.none, msg);
 +				break;
 +			case ALPM_LOG_DEBUG:
@@ -895,6 +896,7 @@
 +				pm_asprintf(string, _("error: %s"), msg);
 +				break;
 +			case ALPM_LOG_WARNING:
++ 			if (strstr(format, "ignoring package upgrade")) return 1; /* gavin: no IgnorePkg warnings */
 +				pm_asprintf(string, _("warning: %s"), msg);
 +				break;
 +			case ALPM_LOG_DEBUG:
@@ -910,7 +912,7 @@
  	}
  	free(msg);
  
-@@ -1504,10 +1538,10 @@ int pm_vfprintf(FILE *stream, alpm_logle
+@@ -1504,10 +1538,11 @@ int pm_vfprintf(FILE *stream, alpm_logle
  	/* print a prefix to the message */
  	switch(level) {
  		case ALPM_LOG_ERROR:
@@ -919,6 +921,7 @@
  			break;
  		case ALPM_LOG_WARNING:
 -			fprintf(stream, _("warning: "));
++ 		if (strstr(format, "ignoring package upgrade")) return 1; /* gavin: no IgnorePkg warnings */
 +			color_fprintf(stream, COLOR_YELLOW_ALL, _("warning: "));
  			break;
  		case ALPM_LOG_DEBUG:
