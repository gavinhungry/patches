--- ../aur/pacman-color/pacman-color-4.0.3.patch.ORIG	2012-04-11 14:52:24.220954540 -0700
+++ ../aur/pacman-color/pacman-color-4.0.3.patch	2012-04-11 14:53:56.284285066 -0700
@@ -2809,7 +2809,7 @@
  	va_end(args);
  
  	return ret;
-@@ -1474,22 +1488,42 @@ int pm_vasprintf(char **string, alpm_log
+@@ -1474,22 +1488,44 @@ int pm_vasprintf(char **string, alpm_log
  	ret = vasprintf(&msg, format, args);
  
  	/* print a prefix to the message */
@@ -2835,6 +2835,7 @@
 +				pm_asprintf(string, "%s%s%s%s", colortab.red, _("error: "), colortab.none, msg);
 +				break;
 +			case ALPM_LOG_WARNING:
++				if (strstr(format, "ignoring package upgrade")) return 1; /* gavin: no IgnorePkg warnings */
 +				pm_asprintf(string, "%s%s%s%s", colortab.yellow, _("warning: "), colortab.none, msg);
 +				break;
 +			case ALPM_LOG_DEBUG:
@@ -2853,6 +2854,7 @@
 +				pm_asprintf(string, _("error: %s"), msg);
 +				break;
 +			case ALPM_LOG_WARNING:
++				if (strstr(format, "ignoring package upgrade")) return 1; /* gavin: no IgnorePkg warnings */
 +				pm_asprintf(string, _("warning: %s"), msg);
 +				break;
 +			case ALPM_LOG_DEBUG:
@@ -2868,7 +2870,7 @@
  	}
  	free(msg);
  
-@@ -1524,10 +1558,10 @@ int pm_vfprintf(FILE *stream, alpm_logle
+@@ -1524,10 +1558,11 @@ int pm_vfprintf(FILE *stream, alpm_logle
  	/* print a prefix to the message */
  	switch(level) {
  		case ALPM_LOG_ERROR:
@@ -2877,6 +2879,7 @@
  			break;
  		case ALPM_LOG_WARNING:
 -			fprintf(stream, _("warning: "));
++			if (strstr(format, "ignoring package upgrade")) return 1; /* gavin: no IgnorePkg warnings */
 +			color_fprintf(stream, COLOR_YELLOW_ALL, _("warning: "));
  			break;
  		case ALPM_LOG_DEBUG:
